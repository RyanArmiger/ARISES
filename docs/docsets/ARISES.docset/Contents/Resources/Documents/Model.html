<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Model  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a name="//apple_ref/swift/Section/Model" class="dashAnchor"></a>
    <a title="Model  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">ARISES Docs</a></p>
        <p class="header-right"><a href="https://github.com/danwells96/ARISES"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">ARISES Reference</a>
        <img id="carat" src="img/carat.png" />
        Model  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="client-design.html">Client Design</a>
              </li>
              <li class="nav-group-task">
                <a href="final-design.html">Final Design</a>
              </li>
              <li class="nav-group-task">
                <a href="design-process.html">Design Process</a>
              </li>
              <li class="nav-group-task">
                <a href="program-architecture.html">Program Architecture</a>
              </li>
              <li class="nav-group-task">
                <a href="testing.html">Testing</a>
              </li>
              <li class="nav-group-task">
                <a href="future-work.html">Future Work</a>
              </li>
              <li class="nav-group-task">
                <a href="ethics-report.html">Ethics Report</a>
              </li>
              <li class="nav-group-task">
                <a href="sustainability-report.html">Sustainability Report</a>
              </li>
              <li class="nav-group-task">
                <a href="meeting-minutes.html">Meeting Minutes</a>
              </li>
              <li class="nav-group-task">
                <a href="focus-group-report.html">Focus Group Report</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Model.html">Model</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ModelController.html">ModelController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PersistenceService.html">PersistenceService</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Insulin.html">Insulin</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Glucose.html">Glucose</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Day.html">Day</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Favourites.html">Favourites</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Meals.html">Meals</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Exercise.html">Exercise</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Illness.html">Illness</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Stress.html">Stress</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Main View.html">Main View</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerMain.html">ViewControllerMain</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/MainViewState.html">MainViewState</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Food Domain.html">Food Domain</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerFood.html">ViewControllerFood</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/IndicatorControllerFood.html">IndicatorControllerFood</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Exercise Domain.html">Exercise Domain</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerExercise.html">ViewControllerExercise</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Health Domain.html">Health Domain</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerHealth.html">ViewControllerHealth</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Advice Domain.html">Advice Domain</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerAdvice.html">ViewControllerAdvice</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Tables.html">Tables</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerTableViewCell.html">ViewControllerTableViewCell</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/tableCellDelegate.html">tableCellDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Graph.html">Graph</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerGraph.html">ViewControllerGraph</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/ChartPointEllipseView.html">ChartPointEllipseView</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/ChartPointEllipseView/extra.html">– extra</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CustomView.html">CustomView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ChartBGView.html">ChartBGView</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Settings.html">Settings</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/SettingsBundleHelper.html">SettingsBundleHelper</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SettingsBundleHelper/SettingsBundleKeys.html">– SettingsBundleKeys</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/AppDelegate.html">AppDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Extensions.html">Other Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/UIView.html">UIView</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>Model</h1>
            <hr>
<h3 id='code-modelcontroller-code' class='heading'><code><a href="Classes/ModelController.html">ModelController</a></code></h3>

<p>Provides functions to safely add and fetch objects from the persistent relational database in ‘Core Data’</p>

<p align="center">
<img src="https://raw.githubusercontent.com/danwells96/ARISES/master/DocFiles/img/database.png" alt="Image of relational database graph"/>
</p>

<p align="center">
Image of relational database graph ARISES.xcdatamodeld
</p>
<h3 id='code-persistenceservice-code' class='heading'><code><a href="Classes/PersistenceService.html">PersistenceService</a></code></h3>

<p>Initialises a persistent store and provides functions to allow ModelController to add objects to its context and save that context.</p>
<h3 id='code-category-extension-files-code' class='heading'><code>Category/Extension files</code></h3>

<p>One file for each NSManagedObject E.g. <code><a href="Classes/Glucose.html">Glucose</a></code>. Allows computed properties and methods to be added to objects in the database to extend their functionality, while automatically generating base property declarations from information added to the <code>ARISES.xcdatamodeld</code> relational database chart. </p>
<h2 id='features' class='heading'>Features</h2>

<ul>
<li>Adding logs to relational database</li>
<li>Persistent storage of database logs</li>
<li>Fetching of filtered and sorted arrays of objects</li>
<li>Extending objects with computed properties to access key information easier</li>
</ul>
<h3 id='adding-to-database' class='heading'>Adding to database</h3>

<ul>
<li><code><a href="Classes/ModelController.html">ModelController</a></code> adds functions that search for existing objects with known links to the object to be added, then adds the new object as a relationship to that object. E.g. When a new <code><a href="Classes/Meals.html">Meals</a></code> object is added, the function searches for a <code><a href="Classes/Day.html">Day</a></code> log with a matching day component of their dates, and adds the meals to that day&rsquo;s meals relationship. If no matching <code><a href="Classes/Day.html">Day</a></code> log is found, one is created with the new date&rsquo;s day component.</li>
<li>When objects are added to the database, they often post notifications, so that <code><a href="Classes/ViewControllerGraph.html">ViewControllerGraph</a></code> or other classes can observe them and update their views accordingly.</li>
</ul>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">nc</span> <span class="o">=</span> <span class="kt">NotificationCenter</span><span class="o">.</span><span class="k">default</span>
<span class="n">nc</span><span class="o">.</span><span class="nf">post</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">Notification</span><span class="o">.</span><span class="kt">Name</span><span class="p">(</span><span class="s">"FoodAdded"</span><span class="p">),</span> <span class="nv">object</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</code></pre>

<p align="center">
Code for notification posted when food is added to database
</p>
<h3 id='persistent-storage' class='heading'>Persistent storage</h3>

<ul>
<li><code><a href="Classes/PersistenceService.html">PersistenceService</a></code> adds functions that allow <code><a href="Classes/ModelController.html">ModelController</a></code> to find a shared context, make changes to objects within that context and then save it so that it persists on the device.</li>
</ul>
<h3 id='fetching-objects' class='heading'>Fetching objects</h3>

<ul>
<li><code><a href="Classes/ModelController.html">ModelController</a></code> adds functions to fetch arrays of objects, primarily for use in creating tables of information. These arrays are filtered, and sorted in a logical order, depending on their contents. E.g. <code><a href="Classes/Meals.html">Meals</a></code> in ascending time, Favourite meals in alphabetical order.</li>
</ul>
<h3 id='extensions-of-objects' class='heading'>Extensions of objects</h3>

<ul>
<li>Many category/extension files contain computed properties which provide easy access to a summary  information. These properties are used in many places. E.g. <code><a href="Classes/Day.html#/foodStats">Day.foodStats</a></code>, which returns a tuple containing the total carbs, protein and fat for that day, which is used to create the food domain status indicator.</li>
<li>The duration property visible in <code><a href="Classes/Illness.html">Illness</a></code>, <code><a href="Classes/Stress.html">Stress</a></code> and <code><a href="Classes/Day.html">Day</a></code> is working, but currently unused within the app</li>
</ul>
<h2 id='future-work' class='heading'>Future Work</h2>

<ul>
<li>Functions for removing/editing logs for use with future edit button functionality</li>
<li>Potentially refactor to use generic types to reduce boilerplate code</li>
<li>Adjust to work as a framework for use with continuous blood glucose monitor and activity band</li>
</ul>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/"></a>
                    <a name="//apple_ref/swift/Class/ModelController" class="dashAnchor"></a>
                    <a class="token" href="#/">ModelController</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Provides fuctions to safely add and fetch objects from the persistent relational database &lsquo;Core Data&rsquo;</p>

                        <a href="Classes/ModelController.html" class="slightly-smaller">See more</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/"></a>
                    <a name="//apple_ref/swift/Class/PersistenceService" class="dashAnchor"></a>
                    <a class="token" href="#/">PersistenceService</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Initialises a persistent store and provides functions to allow ModelController to add objects to it&rsquo;s context and save that context.</p>

                        <a href="Classes/PersistenceService.html" class="slightly-smaller">See more</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/"></a>
                    <a name="//apple_ref/swift/Class/Insulin" class="dashAnchor"></a>
                    <a class="token" href="#/">Insulin</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Insulin NSManagedObject category/extension file</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    The following auto-generated properties are managed within ARISES.xcdatamodeld:
fetchRequest(),
time,
units,
day

</div>

                        <a href="Classes/Insulin.html" class="slightly-smaller">See more</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/"></a>
                    <a name="//apple_ref/swift/Class/Glucose" class="dashAnchor"></a>
                    <a class="token" href="#/">Glucose</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Glucose NSManagedObject category/extension file: Contains a computed property <code>tag</code> to mark if a log is in the hypo/hyper range</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    The following auto-generated properties are managed within ARISES.xcdatamodeld:
fetchRequest(),
time,
value,
day

</div>

                        <a href="Classes/Glucose.html" class="slightly-smaller">See more</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/"></a>
                    <a name="//apple_ref/swift/Class/Day" class="dashAnchor"></a>
                    <a class="token" href="#/">Day</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Day NSManagedObject category/extension file: Contains many computed properties for summarily displaying related object information</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    The following auto-generated properties are managed within ARISES.xcdatamodeld:
date,
exercise,
favourite,
glucose,
illness,
insulin,
meals,
stress,

</div>

                        <a href="Classes/Day.html" class="slightly-smaller">See more</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/"></a>
                    <a name="//apple_ref/swift/Class/Favourites" class="dashAnchor"></a>
                    <a class="token" href="#/">Favourites</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Favourites NSManagedObject category/extension file</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    The following auto-generated properties are managed within ARISES.xcdatamodeld:
fetchRequest(),
days,
exercise,
meals

</div>

                        <a href="Classes/Favourites.html" class="slightly-smaller">See more</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/"></a>
                    <a name="//apple_ref/swift/Class/Meals" class="dashAnchor"></a>
                    <a class="token" href="#/">Meals</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Meals NSManagedObject category/extension file</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    The following auto-generated properties are managed within ARISES.xcdatamodeld:
fetchRequest(),<br>
carbs,
fat,
name,
protein,
time,
day,
favourite

</div>

                        <a href="Classes/Meals.html" class="slightly-smaller">See more</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/"></a>
                    <a name="//apple_ref/swift/Class/Exercise" class="dashAnchor"></a>
                    <a class="token" href="#/">Exercise</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Exercise NSManagedObject category/extension file</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    The following auto-generated properties are managed within ARISES.xcdatamodeld:
fetchRequest(),
duration,
intensity,
name,
time,
day,
favourite

</div>

                        <a href="Classes/Exercise.html" class="slightly-smaller">See more</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/"></a>
                    <a name="//apple_ref/swift/Class/Illness" class="dashAnchor"></a>
                    <a class="token" href="#/">Illness</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Illness NSManagedObject category/extension file: Contains a computed property <code>duration</code> to compute duration of an illness log</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    The following auto-generated properties are managed within ARISES.xcdatamodeld:
fetchRequest(),
end,
start,
day

</div>

                        <a href="Classes/Illness.html" class="slightly-smaller">See more</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/"></a>
                    <a name="//apple_ref/swift/Class/Stress" class="dashAnchor"></a>
                    <a class="token" href="#/">Stress</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Stress NSManagedObject category/extension file: Contains a computed property <code>duration</code> to compute duration of a stress log</p>
<div class="aside aside-note">
    <p class="aside-title">Note</p>
    The following auto-generated properties are managed within ARISES.xcdatamodeld:
fetchRequest(),
end,
start,
day

</div>

                        <a href="Classes/Stress.html" class="slightly-smaller">See more</a>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2019 <a class="link" href="" target="_blank" rel="external">Ryan Armiger, Becky Elkington, Xiaoyu Ma, Dan Wells</a>. All rights reserved. (Last updated: 2019-01-20)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.4</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
