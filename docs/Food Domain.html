<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Food Domain  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a name="//apple_ref/swift/Section/Food Domain" class="dashAnchor"></a>
    <a title="Food Domain  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">ARISES Docs</a></p>
        <p class="header-right"><a href="https://github.com/danwells96/ARISES"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">ARISES Reference</a>
        <img id="carat" src="img/carat.png" />
        Food Domain  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Documentation.html">Documentation</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="client-design.html">Client Design</a>
              </li>
              <li class="nav-group-task">
                <a href="final-design.html">Final Design</a>
              </li>
              <li class="nav-group-task">
                <a href="design-process.html">Design Process</a>
              </li>
              <li class="nav-group-task">
                <a href="program-architecture.html">Program Architecture</a>
              </li>
              <li class="nav-group-task">
                <a href="testing.html">Testing</a>
              </li>
              <li class="nav-group-task">
                <a href="future-work.html">Future Work</a>
              </li>
              <li class="nav-group-task">
                <a href="ethics-report.html">Ethics Report</a>
              </li>
              <li class="nav-group-task">
                <a href="sustainability-report.html">Sustainability Report</a>
              </li>
              <li class="nav-group-task">
                <a href="meeting-minutes.html">Meeting Minutes</a>
              </li>
              <li class="nav-group-task">
                <a href="focus-group-report.html">Focus Group Report</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Model.html">Model</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ModelController.html">ModelController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PersistenceService.html">PersistenceService</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Insulin.html">Insulin</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Glucose.html">Glucose</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Day.html">Day</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Favourites.html">Favourites</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Meals.html">Meals</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Exercise.html">Exercise</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Illness.html">Illness</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Stress.html">Stress</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Graph.html">Graph</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerGraph.html">ViewControllerGraph</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ChartBGView.html">ChartBGView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/CustomView.html">CustomView</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/ChartPointEllipseView.html">ChartPointEllipseView</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/ChartPointEllipseView.html#/s:6ARISES5extra33_B71D914AD94168EA0A72EED549E247EDLLV">– extra</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Main View.html">Main View</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerMain.html">ViewControllerMain</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/MainViewState.html">MainViewState</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Food Domain.html">Food Domain</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerFood.html">ViewControllerFood</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/IndicatorControllerFood.html">IndicatorControllerFood</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Exercise Domain.html">Exercise Domain</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerExercise.html">ViewControllerExercise</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Health Domain.html">Health Domain</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerHealth.html">ViewControllerHealth</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Advice Domain.html">Advice Domain</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerAdvice.html">ViewControllerAdvice</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Tables.html">Tables</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ViewControllerTableViewCell.html">ViewControllerTableViewCell</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/tableCellDelegate.html">tableCellDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Settings.html">Settings</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/SettingsBundleHelper.html">SettingsBundleHelper</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SettingsBundleHelper.html#/s:6ARISES20SettingsBundleHelperC0bC4KeysV">– SettingsBundleKeys</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>Food Domain</h1>
            <hr>
<h3 id='code-viewcontrollerfood-code' class='heading'><code><a href="Classes/ViewControllerFood.html">ViewControllerFood</a></code></h3>

<p>Controlls all UI elements in the open food domain</p>

<p align="center">
<img src="https://raw.githubusercontent.com/danwells96/ARISES/master/DocFiles/img/fooddomain.png" alt="Image of food domain" width="400" />
</p>

<p align="center">
Image of open food domain
</p>
<h3 id='code-indicatorcontrollerfood-code' class='heading'><code><a href="Classes/IndicatorControllerFood.html">IndicatorControllerFood</a></code></h3>

<p>Controlls status indicators shown when food domain is hidden</p>

<p align="center">
<img src="https://raw.githubusercontent.com/danwells96/ARISES/master/DocFiles/img/foodindicator.png" alt="Image of food domain status indicators"/>
</p>

<p align="center">
Image of food domain status indicators
</p>
<h2 id='features' class='heading'>Features</h2>

<ul>
<li>Data entry fields for adding information about meals</li>
<li>Table showing information about meals for the displayed day</li>
<li>Favouriting system to save and choose from favourited meals</li>
<li>Status indicator to show important information when other domains are being viewed</li>
</ul>
<h3 id='data-entry' class='heading'>Data Entry</h3>

<ul>
<li>Name Text field: Keyboard pops up when tapped and the user presses Done when finished</li>
<li>Time: Time Picker pops up to allow the user to choose a time. Dismissed when user presses Done.
<p align="center">
<img src="https://raw.githubusercontent.com/danwells96/ARISES/master/DocFiles/img/Time%20Picker.png" alt="Image of Time Picker" width="200"/>
</p>
<p align="center">
Image of Time Picker
</p></li>
<li>Carbs, Protein, Fat: 
Numpad pops up when tapped to allow the user to enter numbers. 
<p align="center">
<img src="https://raw.githubusercontent.com/danwells96/ARISES/master/DocFiles/img/keypad.png" alt="Image of numpad" width="200"/>
</p>
<p align="center">
Image of numpad
</p>
No decimal point is available on the numpad to provide safety to inputs. Input value is presumed to be in grams, as the logical unit of macro-nutrients typical in other apps, pumps and labels. </br></li>
</ul>
<pre class="highlight swift"><code>    <span class="nv">carbs</span><span class="p">:</span> <span class="kt">Int32</span><span class="p">((</span><span class="kt">Double</span><span class="p">(</span><span class="n">carbsTextField</span><span class="o">.</span><span class="n">text</span><span class="o">!</span><span class="p">)?</span><span class="o">.</span><span class="nf">rounded</span><span class="p">())</span><span class="o">!</span><span class="p">),</span>
</code></pre>

<p align="center">
    Code for assignment of text field value for carbs
</p> 

<p>If a user uses an external keyboard and enters a decimal e.g. 5.5 this will be rounded to nearest integer.  </br>
If a user uses an external keyboard and enters a value that cannot be rounded or converted to an int32 e.g. <q>jkl</q>, the app will crash but will not add this to the log, so the database will not be corrupted and the user can reopen and continue to use the app. This is very unlikely to occur anyway.</p>

<ul>
<li>Add button: Only calls function to add new log to database if all fields contain some text.</li>
<li>Disabled for past days: Data entry fields are hidden if the user is not viewing the current day on the graph.</li>
</ul>
<h3 id='table' class='heading'>Table</h3>

<p align="center">
<img src="https://raw.githubusercontent.com/danwells96/ARISES/master/DocFiles/img/foodcell.png" alt="Image of food table cell" width="200"/>
</p>

<p align="center">
Image of Food table cell
</p>

<ul>
<li>Setting cell labels: <code><a href="Classes/ViewControllerFood.html#/c:@M@ARISES@objc(cs)ViewControllerFood(im)tableView:cellForRowAtIndexPath:">ViewControllerFood.tableView(_:cellForRowAt:)</a></code> uses fetched objects to set the labels of the cells</li>
<li>Displaying meal logs for current day shown on graph: An observer is used to watch for notifications from <code><a href="Classes/ViewControllerGraph.html">ViewControllerGraph</a></code> and update the class&rsquo; <code>currentDay</code> property. The data for the table is then fetched again for meal logs which match <code>currentDay</code><br></li>
</ul>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">nc</span> <span class="o">=</span> <span class="kt">NotificationCenter</span><span class="o">.</span><span class="k">default</span>
<span class="c1">//Observer to update currentDay variable to match graph's day</span>
<span class="n">nc</span><span class="o">.</span><span class="nf">addObserver</span><span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="nv">selector</span><span class="p">:</span> <span class="kd">#selector(</span><span class="nf">updateDay(notification:)</span><span class="kd">)</span><span class="p">,</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">Notification</span><span class="o">.</span><span class="kt">Name</span><span class="p">(</span><span class="s">"dayChanged"</span><span class="p">),</span> <span class="nv">object</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</code></pre>

<p align="center">
Instantiation of observer for when day displayed on the graph changes
</p>
<h3 id='favouriting-system' class='heading'>Favouriting System</h3>

<ul>
<li>Favouriting: If a user clicks the star of a meals cell it will highlight in the colour of the domain to symbolise it has been favourited. This will call a function to add the meal to the favourites object&rsquo;s relationships.</li>
<li>Choosing from favourites: When the star in the data entry section is selected, it will highlight in the colour of the domain. The table will update to display meals which are favourited instead of the current day&rsquo;s meals. If a user selects one of these cells, it will automatically fill in the text fields with that meal&rsquo;s macro-nutrients and the current time. The user can then adjust or add this meal as normal.</li>
</ul>
<h3 id='status-indicators' class='heading'>Status Indicators</h3>

<ul>
<li>Displaying information: <code><a href="Classes/IndicatorControllerFood.html">IndicatorControllerFood</a></code> contains a viewDidLoad override to set the value of the labels to the total carbs, protein and fat for the day shown. These values are available as a computed property in the <code><a href="Classes/Day.html">Day</a></code> category/extension file.<br></li>
<li>Updating: Similarly to the table, an observer is used to track the currently displayed day on the graph. A second observer is used to update the values when a new meal is added to the current day.</li>
</ul>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">nc</span> <span class="o">=</span> <span class="kt">NotificationCenter</span><span class="o">.</span><span class="k">default</span>
<span class="c1">//Observer to update indicators when new meal added</span>
<span class="n">nc</span><span class="o">.</span><span class="nf">addObserver</span><span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="nv">selector</span><span class="p">:</span> <span class="kd">#selector(</span><span class="nf">foodStatsUpdated</span><span class="kd">)</span><span class="p">,</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">Notification</span><span class="o">.</span><span class="kt">Name</span><span class="p">(</span><span class="s">"FoodAdded"</span><span class="p">),</span> <span class="nv">object</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
</code></pre>

<p align="center">
Instantiation of observer for updating indicator when new meal is added
</p>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@ARISES@objc(cs)ViewControllerFood"></a>
                    <a name="//apple_ref/swift/Class/ViewControllerFood" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@ARISES@objc(cs)ViewControllerFood">ViewControllerFood</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Controls all UI elements within the food domain. This includes data entry, favouriting system and managing the food log.</p>

                        <a href="Classes/ViewControllerFood.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">ViewControllerFood</span> <span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="kt">UIPickerViewDelegate</span><span class="p">,</span> <span class="kt">UITableViewDataSource</span><span class="p">,</span> <span class="kt">UITableViewDelegate</span><span class="p">,</span> <span class="n"><a href="Protocols/tableCellDelegate.html">tableCellDelegate</a></span><span class="p">,</span> <span class="kt">UIImagePickerControllerDelegate</span><span class="p">,</span> <span class="kt">UINavigationControllerDelegate</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@M@ARISES@objc(cs)IndicatorControllerFood"></a>
                    <a name="//apple_ref/swift/Class/IndicatorControllerFood" class="dashAnchor"></a>
                    <a class="token" href="#/c:@M@ARISES@objc(cs)IndicatorControllerFood">IndicatorControllerFood</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Controls and updates food indicator elements visible when food domain is hidden. Currently displays total carbs, protein and fat consumed that day</p>

                        <a href="Classes/IndicatorControllerFood.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">IndicatorControllerFood</span> <span class="p">:</span> <span class="kt">UIViewController</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2018 <a class="link" href="" target="_blank" rel="external">Ryan Armiger, Becky Elkington, Xiaoyu Ma, Dan Wells</a>. All rights reserved. (Last updated: 2018-06-25)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
